[< Volver al Ã­ndice](../index.md)

# Extract Form-Specific Blade Components

En este episodio se realiza una limpieza del codigo al extraer blade components para utilizarlos como parte del form para crear el post.

- Se crea un nuevo folder llamado *form* dentro de *resources/views/components* y dentro de el se crean los archivos *button.blade.php*, *error.blade.php*, *field.blade.php*, *input.blade.php*, *label.blade.php*, *textarea.blade.php* y se agrega el siguiente codigo en cada uno de ellos:

#### button.blade.php
```php
<x-form.field>
    <button type="submit"
            class="bg-blue-500 text-white uppercase font-semibold text-xs py-2 px-10 rounded-2xl hover:bg-blue-600"
    >
        {{ $slot }}
    </button>
</x-form.field>
```
#### error.blade.php

```php
@props(['name'])

@error($name)
    <p class="text-red-500 text-xs mt-2">{{ $message }}</p>
@enderror
```
#### field.blade.php

```php
<div class="mt-6">
    {{ $slot }}
</div>
```
#### input.blade.php

```php
@props(['name', 'type' => 'text'])

<x-form.field>
    <x-form.label name="{{ $name }}"/>

    <input class="border border-gray-400 p-2 w-full"
           type="{{ $type }}"
           name="{{ $name }}"
           id="{{ $name }}"
           value="{{ old($name) }}"
           required
    >

    <x-form.error name="{{ $name }}"/>
</x-form.field>
```

#### label.blade.php

```php
@props(['name'])

<label class="block mb-2 uppercase font-bold text-xs text-gray-700"
       for="{{ $name }}"
>
    {{ ucwords($name) }}
</label>
```

#### textarea.blade.php

```php
@props(['name'])

<x-form.field>
    <x-form.label name="{{ $name }}" />

    <textarea
        class="border border-gray-400 p-2 w-full"
        name="{{ $name }}"
        id="{{ $name }}"
        required
    >{{ old($name) }}</textarea>

    <x-form.error name="{{ $name }}" />
</x-form.field>
```

- Y eliminamos el archivo *submit-button.blade.php* ubicado en *resources/components*

- Posteriormente en *_add-comment-form.blade.php* cambiamos la linea que anteriormente tenia un `<x-submit-button>` por `<x-form.button>Submit</x-form.button>`

- Finalmente en *create.blade.php* utilizamos los componentes blade creados anteriormente, quedando el codigo de la siguiente manera:

```php
<x-layout>
    <section class="py-8 max-w-md mx-auto">
        <h1 class="text-lg font-bold mb-4">
            Publish New Post
        </h1>

        <x-panel>
            <form method="POST" action="/admin/posts" enctype="multipart/form-data">
                @csrf

                <x-form.input name="title" />
                <x-form.input name="slug" />
                <x-form.input name="thumbnail" type="file" />
                <x-form.textarea name="excerpt" />
                <x-form.textarea name="body" />
                <x-form.field>
                    <x-form.label name="category" />
                    <select name="category_id" id="category_id">
                        @foreach (\App\Models\Category::all() as $category)
                            <option
                                value="{{ $category->id }}"
                                {{ old('category_id') == $category->id ? 'selected' : '' }}
                            >{{ ucwords($category->name) }}</option>
                        @endforeach
                    </select>
                    <x-form.error name="category" />
                </x-form.field>
                <x-form.button>Publish</x-form.button>
            </form>
        </x-panel>
    </section>
</x-layout>
```

Nuestra aplicacion web deberia de funcionar tal cual funcionaba anteriormente.
