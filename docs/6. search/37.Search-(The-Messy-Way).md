[< Volver al índice](../index.md)

# Search (The Messy Way)

Se implementará una barra de búsqueda para nuestra aplicación, sin embargo no es la mas conveniente.

- En nuestro archivo de rutas `web.php` vamos a modificar la ruta de home con el siguiente codigo:

```php
Route::get('/', function () {
    $posts = Post::latest();

    if(request('search')){
        $posts->where ('title', 'like', '%' . request('search') . '%')->orWhere('body', 'like', '%' . request('search') . '%');
    }
   return view ('posts', [
    'posts'=> $posts->get(),
    'categories'=> Category::all()
   ]);
})->name('home');

Route::get('/posts/{post:slug}', function (Post $post) {

    return view ('post', [
        'post'=> $post
    ]);
});
```

- Y luego se ejecutan los siguientes comandos en bash

```bash
cd /vagrant/sites/lfts.isw811.xyz
php artisan view:clear
php artisan route:clear
php artisan route:cache
```

- Finalmente se modifica el archivo `_posts-header.blade.php` en donde se encuentra el codigo para el search bar y establecer un valor de busqueda por defecto:

```php
<!-- Search -->
<div class="relative flex lg:inline-flex items-center bg-gray-100 rounded-xl px-3 py-2">
    <form method="GET" action="#">
        <input type="text" name="search" placeholder="Find something"
                class="bg-transparent placeholder-black font-semibold text-sm"
                value= "{{ request('search')}}">
    </form>
</div>
```
